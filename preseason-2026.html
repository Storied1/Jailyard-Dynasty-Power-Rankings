<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The Jailyard 2026 Preseason Preview</title>
<meta name="view-transition" content="same-origin" />
<meta name="description" content="The Jailyard 2026 preseason preview. Long-form essay, power rankings for all 12 teams, and offseason analysis." />
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸˆ</text></svg>">

<style>
  :root{
    --bg: #0b0d10;
    --fg: #e8ecf0;
    --muted: #7a8194;
    --accent: #8b5cf6;
    --accent2: #ec4899;
    --card: rgba(255,255,255,0.03);
    --glass: rgba(255,255,255,0.06);
    --border: rgba(255,255,255,0.08);
    --good: #16a34a;
    --bad: #dc2626;
    --warn: #ca8a04;
    --font-main: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    --h1: clamp(2.4rem, 5vw, 4rem);
    --h2: clamp(1.8rem, 4vw, 3rem);
    --h3: clamp(1.3rem, 3vw, 2rem);
    color-scheme: dark;
  }
  html.light{
    --bg:#f7f9fc; --fg:#111418; --muted:#5f6672;
    --card:rgba(0,0,0,0.03); --glass:rgba(0,0,0,0.04); --border:rgba(0,0,0,0.08);
    color-scheme:light;
  }
  @view-transition{ navigation:auto; }
  ::view-transition-old(root){ animation:vt-out .2s ease-in; }
  ::view-transition-new(root){ animation:vt-in .3s ease-out; }
  @keyframes vt-out{ to{opacity:0;filter:blur(2px);} }
  @keyframes vt-in{ from{opacity:0;filter:blur(2px);} }
  html, body{
    scroll-behavior: smooth;
    margin: 0;
    background: var(--bg);
    color: var(--fg);
    font-family: var(--font-main);
  }
  *, *::before, *::after{ box-sizing: border-box; }
  a{ color: var(--accent2); text-decoration: none; }
  a:hover{ text-decoration: underline; }
  header.hero{
    position: relative;
    min-height: 90vh;
    overflow: hidden;
    display: grid;
    place-items: center;
  }
  .hero__layer{
    position: absolute;
    inset: 0;
    will-change: transform;
    background-size: cover;
    background-position: center;
  }
  .layer-stars{ background-image: radial-gradient(circle at 30% 30%, rgba(140,115,255,0.3) 0%, transparent 60%), radial-gradient(circle at 70% 70%, rgba(236,72,153,0.3) 0%, transparent 60%), radial-gradient(circle at 20% 80%, rgba(22,163,74,0.25) 0%, transparent 60%), linear-gradient(#101317, #0e1013); }
  .layer-grid{ background-image: linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px); background-size: 80px 80px; opacity:.5; }
  .hero__content{ position: relative; z-index: 2; text-align: center; padding: 3rem 1rem; max-width: 900px; }
  .hero__title{ font-size: var(--h1); line-height: 1.1; margin:0; font-weight: 700; background: linear-gradient(96deg,#fff,#e2d9ff 45%,#fda4af 80%); -webkit-background-clip: text; color: transparent; }
  .hero__subtitle{ font-size: 1.1rem; color: var(--muted); max-width: 700px; margin: 1rem auto 2rem; line-height: 1.5; }
  .hero__cta{ display: inline-flex; gap:.6rem; align-items: center; padding: .75rem 1.4rem; background: var(--accent); color:#fff; border-radius:999px; font-weight:600; transition: transform .2s ease; text-decoration:none; }
  .hero__cta:hover{ transform: translateY(-3px); text-decoration:none; }
  #nav{ position: sticky; top: 0; z-index: 10; backdrop-filter: blur(8px); background: rgba(11,13,16,.7); border-bottom:1px solid var(--border); }
  #nav .inner{ max-width:1200px; margin:0 auto; padding:.7rem 1rem; display:flex; justify-content: space-between; align-items:center; }
  #nav .brand{ font-weight:700; letter-spacing:.05em; }
  #nav nav{ display:flex; gap:.8rem; flex-wrap: wrap; }
  #nav nav a{ padding:.35rem .6rem; border-radius:6px; font-size:.9rem; color: var(--muted); }
  #nav nav a.active{ background:rgba(255,255,255,0.05); color: var(--fg); }
  #nav .right{ display:flex; gap:.8rem; align-items:center; }
  .theme-toggle{ cursor:pointer; padding:.4rem .8rem; border:1px solid var(--border); border-radius:999px; background:rgba(255,255,255,0.05); font-size:.9rem; color:var(--muted); }
  #nav .hamburger{display:none;background:none;border:none;cursor:pointer;padding:.4rem;color:var(--muted);transition:color .2s;}
  #nav .hamburger:hover,#nav .hamburger:focus-visible{color:var(--fg);}
  #nav .hamburger svg{width:24px;height:24px;stroke:currentColor;fill:none;stroke-width:2;}
  .container{ max-width: 900px; margin:0 auto; padding:4rem 1rem; position:relative; }
  .section-title{ font-size: var(--h2); margin-bottom:.7rem; }
  .section-sub{ color: var(--muted); font-size:1rem; margin-bottom:2.5rem; max-width:700px; line-height:1.6; }
  .card{ background: var(--card); border:1px solid var(--border); border-radius:16px; padding:1.3rem 1.5rem; margin-bottom:1.2rem; box-shadow:0 6px 18px rgba(0,0,0,.18); transition: transform .2s ease, box-shadow .2s ease; }
  .card:hover{ transform: translateY(-4px); box-shadow:0 10px 30px rgba(0,0,0,.22); }
  .essay{ font-size:1.05rem; line-height:1.7; margin-bottom:2rem; }
  .essay p{ margin:0 0 1.2rem; }
  .essay p:last-child{ margin-bottom:0; }
  .fade-in{ opacity:0; transform:translateY(20px); transition:all .6s cubic-bezier(.17,.67,.24,1); }
  .fade-in.visible{ opacity:1; transform:none; }
  footer{ padding:3rem 1rem; text-align:center; color:var(--muted); font-size:.9rem; border-top:1px solid var(--border); }
  .back-to-top{position:fixed;bottom:1.5rem;right:1.5rem;z-index:997;width:44px;height:44px;border-radius:50%;background:rgba(11,13,16,0.85);backdrop-filter:blur(8px);border:1px solid var(--border);display:grid;place-items:center;cursor:pointer;opacity:0;transform:translateY(10px);transition:opacity .3s,transform .3s,background .2s;pointer-events:none;}
  .back-to-top.show{opacity:1;transform:none;pointer-events:auto;}
  .back-to-top:hover{background:var(--accent);}
  .back-to-top svg{width:20px;height:20px;stroke:var(--fg);fill:none;stroke-width:2;}
  .scroll-progress{position:fixed;top:0;left:0;height:3px;z-index:200;background:linear-gradient(90deg,var(--accent),var(--accent2));width:0%;transition:width .1s linear;pointer-events:none;}

  /* Power Rankings */
  .ranking-entry{
    display:flex; gap:1rem; align-items:flex-start; padding:1rem 0;
    border-bottom:1px solid var(--border);
  }
  .ranking-entry:last-child{ border-bottom:none; }
  .rank-badge{
    background:var(--accent); color:#fff; width:36px; height:36px; border-radius:50%;
    display:grid; place-items:center; font-weight:700; font-size:.85rem; flex-shrink:0;
  }
  .rank-tier{
    display:inline-block; padding:.1rem .45rem; border-radius:6px; font-size:.75rem; font-weight:600; margin-left:.5rem;
  }
  .tier-contender{ background:rgba(22,163,74,0.2); color:#16a34a; }
  .tier-frisky{ background:rgba(139,92,246,0.2); color:#8b5cf6; }
  .tier-fraud{ background:rgba(220,38,38,0.2); color:#dc2626; }
  .tier-process{ background:rgba(202,138,4,0.2); color:#ca8a04; }
  .ranking-entry h4{ margin:0 0 .3rem; font-size:1rem; }
  .ranking-entry p{ margin:0; color:var(--muted); font-size:.9rem; line-height:1.5; }
  .ranking-entry .owner-tag{ color:var(--muted); font-weight:400; font-size:.85rem; }

  /* Media Slots (GIF/video embeds) */
  .media-slot {
    margin: 1.5rem auto;
    max-width: 480px;
    text-align: center;
  }
  .media-slot video {
    max-width: 100%;
    height: auto;
    border-radius: 12px;
    border: 1px solid var(--border);
    display: block;
    background: var(--card);
  }
  .media-slot--hero {
    max-width: 100%;
  }
  .media-slot--hero video {
    width: 100%;
    border-radius: 16px;
  }
  .media-slot .play-overlay {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    cursor: pointer;
    background: rgba(0,0,0,0.3);
    border-radius: 12px;
    opacity: 0;
    transition: opacity 0.2s;
  }
  .media-slot .play-overlay.active {
    opacity: 1;
  }
  .media-slot .play-overlay svg {
    width: 48px;
    height: 48px;
    fill: #fff;
    filter: drop-shadow(0 2px 8px rgba(0,0,0,0.5));
  }
  .media-slot figcaption {
    font-size: 0.75rem;
    color: var(--muted);
    margin-top: 0.4rem;
  }

  @media (max-width:768px){
    #nav .hamburger{display:block;}
    #nav nav{display:none;width:100%;}
    #nav nav.open{display:flex;flex-direction:column;gap:0;}
    #nav .inner{flex-wrap:wrap;}
    .ranking-entry{ flex-wrap:wrap; }
    .container{ padding:2rem 1rem; }
  }
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
</style>
</head>
<body>
<div class="scroll-progress" id="scrollProgress"></div>
<header class="hero">
  <div class="hero__layer layer-stars" data-speed="0.2"></div>
  <div class="hero__layer layer-grid" data-speed="0.05"></div>
  <div class="hero__content">
    <h1 class="hero__title">The Jailyard 2026 Preview</h1>
    <p class="hero__subtitle">Three blockbuster trades, two retirements, and a rookie class that has the group chat at war. The most chaotic preseason in league history.</p>
    <a href="#essay" class="hero__cta">
      <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 3v12M3 9l6 6 6-6"/></svg>
      Read the Preview
    </a>
  </div>
</header>

<div id="nav">
  <div class="inner">
    <span class="brand">The Jailyard</span>
    <button class="hamburger" id="hamburger" aria-label="Toggle navigation" aria-expanded="false">
      <svg viewBox="0 0 24 24"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
    </button>
    <nav>
      <a href="#essay">Essay</a>
      <a href="#rankings">Rankings</a>
    </nav>
    <div class="right">
      <button class="theme-toggle" id="toggleTheme">Light</button>
    </div>
  </div>
</div>

<main class="container">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ESSAY                                       -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="essay" class="fade-in">
    <h2 class="section-title">The 2026 Preseason Preview</h2>
    <p class="section-sub">Offseason chaos, rookie debates, and twelve teams with something to prove.</p>
    <article class="card essay" id="preseason-essay"></article>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- POWER RANKINGS                              -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="rankings" class="fade-in" style="margin-top:3rem;">
    <h2 class="section-title">2026 Preseason Power Rankings</h2>
    <p class="section-sub">Where every team stands before a single snap.</p>
    <article class="card" id="rankings-list"></article>
  </section>

</main>

<button class="back-to-top" id="backToTop" aria-label="Back to top">
  <svg viewBox="0 0 24 24"><path d="M12 19V5M5 12l7-7 7 7"/></svg>
</button>

<footer id="siteFooter">
  <div style="font-size:.7rem;color:var(--muted);margin-bottom:.4rem;">
    GIFs <a href="https://giphy.com" style="color:var(--muted);text-decoration:underline;">Powered by GIPHY</a>
  </div>
</footer>

<script src="config.js"></script>
<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// THEME TOGGLE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.getElementById('toggleTheme').addEventListener('click', function(){
  document.documentElement.classList.toggle('light');
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PARALLAX
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.addEventListener('scroll', function(){
  var sc = window.scrollY;
  document.querySelectorAll('.hero__layer').forEach(function(layer){
    var speed = parseFloat(layer.dataset.speed) || 0.1;
    layer.style.transform = 'translateY(' + (sc * speed) + 'px)';
  });
}, { passive: true });

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var preseasonEssay = "The 2026 offseason hit The Jailyard like a freight train nobody ordered.\n\n{{media:preseason-2026-essay-opener}}\n\nThree blockbuster trades, two retirements, and a rookie draft class that has the group chat divided into warring factions. Welcome to the most chaotic preseason in Jailyard history.\n\nKittler on the Roof defends a title won on the backs of Joe Burrow and Puka Nacua, but the rest of the league isn\u2019t sitting still. General Ken\u2011obi reloaded at quarterback. MHJTIME finally addressed the running back problem that\u2019s haunted them for two years. The Boonist Monks went full scorched earth, trading Tyreek Hill for a haul of picks that had the group chat typing in all caps for forty-five minutes straight.\n\n{{media:preseason-2026-mid-essay}}\n\nChudders Football Team is the story nobody saw coming: two years of tanking, a mountain of draft capital, and suddenly a roster that looks like it was assembled by a kid with unlimited Madden trade override. Ghastly Grayskull Gang finally found a receiver room that doesn\u2019t make you squint. And somewhere in the middle, Rasheeing the Scene is still doing Rasheeing the Scene things \u2014 scoring 180 one week, 90 the next, and blaming the schedule both times.\n\nIf last season taught us anything, it\u2019s that preseason rankings are suggestions written in pencil. The football gods use a Sharpie.";

var preseasonRankings = [
  { rank:1, teamName:"General Ken\u2011obi", owner:"bLaker24", tier:"Contender", blurb:"You won it all in 2023, made the semis in 2024, and your roster still reads like the All-Pro team. Four startable QBs, a three-headed RB monster, and a WR corps that could headline Coachella. We\u2019re all just hoping you oversleep on waiver day." },
  { rank:2, teamName:"Noble FFT", owner:"kevobucks", tier:"Frisky", blurb:"Bijan and Breece at running back make you the consensus No. 2. Caleb Williams arrives with more hype than any prospect in a decade. Fix tight end and you could be lifting the trophy. A disappointing 7th-place finish last year masks how loaded you are." },
  { rank:3, teamName:"MHJTIME", owner:"rango_", tier:"Contender", blurb:"Last in 2023, semifinalist in 2024, top three in 2025. The best WR trio on the planet \u2014 Chase, Nabers, and MHJ \u2014 plus a top-five tight end make you lethal. The only thing between you and a title is your RB room, and the group chat won\u2019t let you forget it." },
  { rank:4, teamName:"Ghastly Grayskull Gang", owner:"GrayskullXX", tier:"Frisky", blurb:"From the consolation bracket to a top-four power rank in two years. Stroud and Bowers form a terrifying core. Your mountain of picks finally turned into real players \u2014 use what\u2019s left to buy a proper WR1 and crash the finals." },
  { rank:5, teamName:"Rasheeing the Scene", owner:"ToreroGaucho", tier:"Frisky", blurb:"Fifth and fifth the last two years. Josh Allen is an MVP, your RB room is a Ferrari, and your WRs are barely road legal. Without a true WR1 you\u2019re stuck in the frisky middle, scoring 180 one week and 90 the next." },
  { rank:6, teamName:"Kittler on the Roof", owner:"bchodos", tier:"Contender", blurb:"Back-to-back finals appearances capped with a 2024 title. The core is aging and thin behind the starters, so the models drop you to sixth. Your consistency will keep you in the hunt, but the crown sits heavier every year." },
  { rank:7, teamName:"Chudders Football Team", owner:"Chudders", tier:"Trust the Process", blurb:"Two years of tanking and a league-high haul of first-round picks. Build around Gibbs and Herbert, and next year\u2019s ranking could look very different. The WR room is barren, but the war chest is unmatched." },
  { rank:8, teamName:"Burden of Etienne\u2011y Woody", owner:"kharlo w", tier:"Fraud", blurb:"Justin Jefferson can only carry you so far. Solidly in the middle of the pack the last two years. QB and RB roulette drag you down. Use those extra firsts to find a real quarterback before Jefferson starts asking for a trade." },
  { rank:9, teamName:"The Legion of Bouz", owner:"KidBouzie", tier:"Frisky", blurb:"You took home the 2022 trophy but have slid since. Mahomes and your WR trio still scare everyone, but your RBs and TEs are aging fast. A rebuild may be closer than you think \u2014 the chat already has a countdown." },
  { rank:10, teamName:"Father Time", owner:"Redrumsregrub", tier:"Frisky", blurb:"Semi-finalist in 2024 but the slide is real. Your rookie WR room props up the value \u2014 Brian Thomas and Ladd McConkey are studs \u2014 but the backfield and tight ends put a hard cap on your upside." },
  { rank:11, teamName:"Sleeping Giants", owner:"zbcowan", tier:"Frisky", blurb:"You rode Hurts and a deep backfield to the 2024 final but fell short. Time is catching up to your receivers \u2014 Kupp, Allen, and Evans aren\u2019t getting younger. Sell a vet and pivot before the window slams shut." },
  { rank:12, teamName:"The Boonist Monks", owner:"GauchoTrain", tier:"Frisky", blurb:"Third place in 2023, eighth in 2024, and now you sit at the bottom. Lamar, Tyreek, and Kelce can still win you weeks, but all three are approaching age cliffs. Your lack of picks makes retooling tricky. One last run or full teardown \u2014 the clock is ticking." }
];

// Media cache: populated by resolve_media.py --resolve
var mediaCache = {
  "preseason-2026-essay-opener": {
    "giphy_id": "NTur7XlVDUdqM",
    "mp4_url": "https://media1.giphy.com/media/v1.Y2lkPWNiODYxNzZlNTV3ZjhkaGN4NjJwN3ExaWJ1M3MzcDc4YnZmdmUwY2Y1NzB0NWswaSZlcD12MV9naWZzX2dpZklkJmN0PWc/NTur7XlVDUdqM/giphy.mp4",
    "poster_url": "https://media1.giphy.com/media/v1.Y2lkPWNiODYxNzZlNTV3ZjhkaGN4NjJwN3ExaWJ1M3MzcDc4YnZmdmUwY2Y1NzB0NWswaSZlcD12MV9naWZzX2dpZklkJmN0PWc/NTur7XlVDUdqM/giphy_s.gif",
    "width": 480,
    "height": 270,
    "alt_text": "This is fine meme - the 2026 offseason in one GIF"
  },
  "preseason-2026-mid-essay": {
    "giphy_id": "L6v2D2KlfO43qU87dY",
    "mp4_url": "https://media4.giphy.com/media/v1.Y2lkPWNiODYxNzZldmY4N2d4Nm5qOGNtY3JhbDNpZ3J4dHRtdzllcDY5dWk0Ym93ang3bCZlcD12MV9naWZzX2dpZklkJmN0PWc/L6v2D2KlfO43qU87dY/giphy.mp4",
    "poster_url": "https://media4.giphy.com/media/v1.Y2lkPWNiODYxNzZldmY4N2d4Nm5qOGNtY3JhbDNpZ3J4dHRtdzllcDY5dWk0Ym93ang3bCZlcD12MV9naWZzX2dpZklkJmN0PWc/L6v2D2KlfO43qU87dY/giphy_s.gif",
    "width": 600,
    "height": 600,
    "alt_text": "Group chat arguing reaction"
  },
  "preseason-2026-hero": {
    "type": "custom",
    "local_path": "media/custom/preseason-2026-hero.mp4",
    "alt_text": "The Jailyard 2026 â€” A new dynasty begins"
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderPreseason() {
  // â”€â”€ Essay â”€â”€
  var essayEl = document.getElementById('preseason-essay');
  var essayHtml = '';
  // Split essay on double newlines into paragraphs
  var parts = preseasonEssay.split('\n\n');
  parts.forEach(function(part) {
    part = part.trim();
    if (!part) return;
    // Check if this part is a media token
    var mediaMatch = part.match(/^\{\{media:([^}]+)\}\}$/);
    if (mediaMatch) {
      var slotId = mediaMatch[1];
      var slot = mediaCache[slotId];
      if (slot && slot.mp4_url) {
        essayHtml += '<figure class="media-slot" id="media-' + slotId + '">'
          + '<video loop muted playsinline'
          + ' width="' + (slot.width || 480) + '" height="' + (slot.height || 360) + '"'
          + ' poster="' + (slot.poster_url || '') + '" preload="none"'
          + ' aria-label="' + (slot.alt_text || '').replace(/"/g, '&quot;') + '">'
          + '<source data-src="' + slot.mp4_url + '" type="video/mp4">'
          + '</video></figure>';
      } else if (slot && slot.type === 'custom' && slot.local_path) {
        essayHtml += '<figure class="media-slot media-slot--hero" id="media-' + slotId + '">'
          + '<video controls muted playsinline preload="none"'
          + ' aria-label="' + (slot.alt_text || '').replace(/"/g, '&quot;') + '">'
          + '<source data-src="' + slot.local_path + '" type="video/mp4">'
          + '</video></figure>';
      }
      // If no cache entry, silently drop
    } else {
      // Check for inline media tokens within a paragraph
      var rendered = part.replace(/\{\{media:([^}]+)\}\}/g, function(match, sid) {
        var s = mediaCache[sid];
        if (s && s.mp4_url) {
          return '</p><figure class="media-slot" id="media-' + sid + '">'
            + '<video loop muted playsinline'
            + ' width="' + (s.width || 480) + '" height="' + (s.height || 360) + '"'
            + ' poster="' + (s.poster_url || '') + '" preload="none"'
            + ' aria-label="' + (s.alt_text || '').replace(/"/g, '&quot;') + '">'
            + '<source data-src="' + s.mp4_url + '" type="video/mp4">'
            + '</video></figure><p>';
        }
        return ''; // silently drop
      });
      essayHtml += '<p>' + rendered + '</p>';
    }
  });
  essayEl.innerHTML = essayHtml;

  // â”€â”€ Rankings â”€â”€
  var rankEl = document.getElementById('rankings-list');
  var rankHtml = '';
  preseasonRankings.forEach(function(r) {
    var tierClass = 'tier-frisky';
    if (r.tier === 'Contender') tierClass = 'tier-contender';
    else if (r.tier === 'Fraud') tierClass = 'tier-fraud';
    else if (r.tier === 'Trust the Process') tierClass = 'tier-process';

    rankHtml += '<div class="ranking-entry">'
      + '<div class="rank-badge">#' + r.rank + '</div>'
      + '<div>'
      + '<h4>' + r.teamName + ' <span class="owner-tag">(' + r.owner + ')</span>'
      + ' <span class="rank-tier ' + tierClass + '">' + r.tier + '</span></h4>'
      + '<p>' + r.blurb + '</p>'
      + '</div>'
      + '</div>';
  });
  rankEl.innerHTML = rankHtml;
}

renderPreseason();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INTERACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Scroll animations
var scrollObserver = new IntersectionObserver(function(entries) {
  entries.forEach(function(e) {
    if (e.isIntersecting) {
      e.target.classList.add('visible');
      scrollObserver.unobserve(e.target);
    }
  });
}, { threshold: 0.15 });
document.querySelectorAll('.fade-in').forEach(function(el) { scrollObserver.observe(el); });

// Back to top
var btt = document.getElementById('backToTop');
window.addEventListener('scroll', function() {
  btt.classList.toggle('show', window.scrollY > 500);
}, { passive: true });
btt.addEventListener('click', function() { window.scrollTo({ top: 0, behavior: 'smooth' }); });

// Mobile hamburger menu
document.getElementById('hamburger').addEventListener('click', function() {
  document.querySelector('#nav nav').classList.toggle('open');
  document.getElementById('hamburger').setAttribute('aria-expanded',
    document.querySelector('#nav nav').classList.contains('open'));
});
document.querySelectorAll('#nav nav a').forEach(function(a) {
  a.addEventListener('click', function() {
    document.querySelector('#nav nav').classList.remove('open');
    document.getElementById('hamburger').setAttribute('aria-expanded', 'false');
  });
});

// Scroll progress bar
window.addEventListener('scroll', function() {
  var h = document.documentElement.scrollHeight - window.innerHeight;
  var pct = h > 0 ? (window.scrollY / h) * 100 : 0;
  document.getElementById('scrollProgress').style.width = pct + '%';
}, { passive: true });

// Active nav link highlighting
var navAnchors = document.querySelectorAll('#nav nav a');
var navSpy = new IntersectionObserver(function(entries) {
  entries.forEach(function(e) {
    if (e.isIntersecting && e.target.id) {
      navAnchors.forEach(function(a) {
        a.classList.toggle('active', a.getAttribute('href') === '#' + e.target.id);
      });
    }
  });
}, { rootMargin: '-30% 0px -60% 0px', threshold: 0 });
document.querySelectorAll('section[id]').forEach(function(el) { navSpy.observe(el); });

// Apply config footer
if (typeof applyConfig === 'function') applyConfig();

// â”€â”€ Media slot lazy loading + reduced-motion â”€â”€
(function(){
  var prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');
  var mediaSlots = document.querySelectorAll('.media-slot');
  if (!mediaSlots.length) return;

  var playSvg = '<svg viewBox="0 0 24 24"><polygon points="5,3 19,12 5,21"/></svg>';

  function applyMotionPref(video, overlay) {
    if (prefersReducedMotion.matches) {
      video.removeAttribute('autoplay');
      video.pause();
      video.currentTime = 0;
      if (overlay) overlay.classList.add('active');
    } else {
      if (video.src || video.querySelector('source[src]')) {
        video.play().catch(function(){});
      }
      if (overlay) overlay.classList.remove('active');
    }
  }

  var mediaObserver = new IntersectionObserver(function(entries) {
    entries.forEach(function(e) {
      if (!e.isIntersecting) return;
      var video = e.target.querySelector('video');
      if (!video) return;
      var source = video.querySelector('source[data-src]');
      if (source && !source.src) {
        source.src = source.dataset.src;
        source.removeAttribute('data-src');
        video.load();
        video.addEventListener('loadeddata', function() {
          var overlay = e.target.querySelector('.play-overlay');
          if (!prefersReducedMotion.matches) {
            video.play().catch(function(){});
          } else if (overlay) {
            overlay.classList.add('active');
          }
        }, { once: true });
      }
      mediaObserver.unobserve(e.target);
    });
  }, { rootMargin: '200px' });

  mediaSlots.forEach(function(slot) {
    var video = slot.querySelector('video');
    if (!video) return;

    slot.style.position = 'relative';
    var overlay = document.createElement('div');
    overlay.className = 'play-overlay';
    overlay.innerHTML = playSvg;
    overlay.addEventListener('click', function() {
      video.play().catch(function(){});
      overlay.classList.remove('active');
    });
    slot.appendChild(overlay);

    mediaObserver.observe(slot);
  });

  prefersReducedMotion.addEventListener('change', function() {
    mediaSlots.forEach(function(slot) {
      var video = slot.querySelector('video');
      var overlay = slot.querySelector('.play-overlay');
      if (video) applyMotionPref(video, overlay);
    });
  });
})();
</script>
</body>
</html>
